'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};(function(a,b){return'object'===('undefined'==typeof exports?'undefined':_typeof(exports))?module.exports=b():'function'==typeof define&&define.amd?define(function(){return b()}):a.datepicker=b()})(void 0,function(){'use strict';function a(C){if(C.ifRangeActive){b(C);var D=C.calendar.querySelector('.calendar__datepicker-active');if(D){D.classList.add('calendar__datepicker-active-range');for(var E=Array.from(C.calendar.querySelectorAll('.calendar__datepicker-square.calendar__datepicker-num')),F=E.indexOf(D),G=void 0,H=void 0,I=1;3>=I;I++)3===I?(F+I<E.length&&(E[F+I].classList.contains('calendar__datepicker-disabled')||E[F+I].classList.contains('calendar__datepicker-empty')?!H&&(E[F+I-1].classList.remove('calendar__datepicker-num-range'),E[F+I-1].classList.add('calendar__datepicker-num-range-right')):E[F+I].classList.add('calendar__datepicker-num-range-right')),-1<F-I&&(E[F-I].classList.contains('calendar__datepicker-disabled')||E[F-I].classList.contains('calendar__datepicker-empty')?!G&&(E[F-I+1].classList.remove('calendar__datepicker-num-range'),E[F-I+1].classList.add('calendar__datepicker-num-range-left')):E[F-I].classList.add('calendar__datepicker-num-range-left'))):(F+I<E.length&&(E[F+I].classList.contains('calendar__datepicker-disabled')||E[F+I].classList.contains('calendar__datepicker-empty')?!H&&(H=!0,E[F+I-1].classList.remove('calendar__datepicker-num-range'),E[F+I-1].classList.add('calendar__datepicker-num-range-right')):E[F+I].classList.add('calendar__datepicker-num-range')),-1<F-I&&(E[F-I].classList.contains('calendar__datepicker-disabled')||E[F-I].classList.contains('calendar__datepicker-empty')?!G&&(G=!0,E[F-I+1].classList.remove('calendar__datepicker-num-range'),E[F-I+1].classList.add('calendar__datepicker-num-range-left')):E[F-I].classList.add('calendar__datepicker-num-range')))}}}function b(C){var D=C.calendar.querySelector('.calendar__datepicker-active-range');if(D){D.classList.remove('calendar__datepicker-active-range');for(var E=Array.from(C.calendar.querySelectorAll('.calendar__datepicker-square.calendar__datepicker-num')),F=E.indexOf(D),G=0;3>=G;G++)F+G<E.length&&(E[F+G].classList.remove('calendar__datepicker-num-range'),E[F+G].classList.remove('calendar__datepicker-num-range-right')),-1<F-G&&(E[F-G].classList.remove('calendar__datepicker-num-range-left'),E[F-G].classList.remove('calendar__datepicker-num-range'))}}function d(C,D){if(x.includes(D))throw new Error('A datepicker already exists on that element.');var E=C.minDate,F=C.dateSelected,G=C.formatter;return['onSelect','onShow','onHide','onMonthChange'].forEach(function(H){C[H]='function'==typeof C[H]&&C[H]}),C}function f(C,D){var E=j(C,D),F=k(C,D),G='';D.ifRange&&(G=h());var H=g();D.calendar.innerHTML=E+F+G+H}function g(){return'\n\t\t<div class="calendar__buttons">\n\t\t\t<button type="button" class="button button_blue-gradient calendar__button-submit">\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C</button>\n\t\t</div>\n\t'}function h(){return'\n\t\t\t<label class="calendar__datepicker-checkbox">\n\t\t\t\t<input type="checkbox" checked class="calendar__datepicker-checkbox__input" id="id-calendar__datepicker-checkbox">\n\t\t\t\t<span class="calendar__datepicker-checkbox__custom"></span>\n\t\t\t\t<span class="calendar__datepicker-checkbox__label">\xB1 3 \u0434\u043D\u044F</span>\n\t\t\t</label>\n    '}function j(C,D){return'\n\t\t\t<div class="calendar__datepicker-controls">\n\t\t\t\t<div class="calendar__datepicker-arrow calendar__datepicker-left">\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" viewBox="0 0 7 12">\n\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t.st0{fill:#4d7bd7}\n\t\t\t\t\t\t</style>\n\t\t\t\t\t\t<path d="M7 6l-5.7 6L0 10.8 4.5 6 0 1.2 1.3 0z" class="st0"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n        <div class="calendar__datepicker-month-year">\n          <span class="calendar__datepicker-month">'+D.months[C.getMonth()]+'</span>\n          <span class="calendar__datepicker-year">'+C.getFullYear()+'</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="calendar__datepicker-arrow calendar__datepicker-right">\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" viewBox="0 0 7 12">\n\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t.st0{fill:#4d7bd7}\n\t\t\t\t\t\t</style>\n\t\t\t\t\t\t<path d="M7 6l-5.7 6L0 10.8 4.5 6 0 1.2 1.3 0z" class="st0"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n      </div>\n    '}function k(C,D){var E=D.minDate,F=D.dateSelected,G=D.currentYear,H=D.currentMonth,I=D.days,J=new Date,K=J.toDateString()===C.toDateString(),L=new Date(new Date(C).setDate(1)),M=L.getDay()-D.startDay,N=0>M?7:0;L.setMonth(L.getMonth()+1),L.setDate(0);var O=L.getDate(),P=[],Q=N+7*(0|(M+O)/7);Q+=(M+O)%7?7:0;for(var R=1;R<=Q;R++){var S=I[(R-1)%7],T=R-(0<=M?M:7+M),U=new Date(G,H,T),V='<span class="calendar__datepicker-num">'+U.getDate()+'</span>',W=E&&U<E,X=I[6],Y=I[0],Z=K&&!W&&T===J.getDate(),$='';$=W?'calendar__datepicker-disabled':Z?'calendar__datepicker-current':'',U.toDateString()===F.toDateString()&&($+=' calendar__datepicker-active'),U.getFullYear()<G||U.getFullYear()===G&&U.getMonth()<H?$+=' prev-month':(U.getFullYear()>G||U.getFullYear()===G&&U.getMonth()>H)&&($+=' next-month'),P.push('<div class="calendar__datepicker-square calendar__datepicker-num '+S+' '+$+'">'+V+'</div>')}var _=I.map(function(aa){return'<div class="calendar__datepicker-square calendar__datepicker-day">'+aa+'</div>'}).concat(P);return _.unshift('<div class="calendar__datepicker-squares">'),_.push('</div>'),_.join('')}function l(C,D){var E=D.currentMonth,F=D.currentYear,G=D.calendar,H=D.el,I=D.onSelect,J=G.querySelector('.calendar__datepicker-active'),K=C.textContent,L=new Date(F,E,K);C.classList.contains('prev-month')?L.setMonth(L.getMonth()-1):C.classList.contains('next-month')&&L.setMonth(L.getMonth()+1),D.dateSelected=L,D.calendar.parentNode.querySelector('.calendar__selected-date').innerHTML=K+' '+B[L.getMonth()]+' '+L.getFullYear(),J&&J.classList.remove('calendar__datepicker-active'),C.classList.add('calendar__datepicker-active'),D.ifRange&&D.ifRangeActive&&a(D),m(D),I&&I(D)}function m(C){if(C.formatter)return C.formatter(C.input,C.dateSelected);var D=C.dateSelected.getFullYear(),E=C.dateSelected.getMonth()+1,F=10>E?0:'',G=C.dateSelected.getDate(),H=10>G?0:'';C.input.value=D+'-'+F+E+'-'+H+G}function n(C,D,E){E?D.currentYear=E:(D.currentMonth+=C.contains('calendar__datepicker-right')?1:-1,12===D.currentMonth?(D.currentMonth=0,D.currentYear++):-1===D.currentMonth&&(D.currentMonth=11,D.currentYear--));var F=new Date(D.currentYear,D.currentMonth,1);f(F,D),D.currentMonthName=D.months[D.currentMonth],D.onMonthChange&&E&&D.onMonthChange(D);var G=D.calendar.querySelector('.calendar__button-submit');if(G.addEventListener('click',v.bind({instance:D})),D.ifRange){b(D),a(D);var H=D.calendar.querySelector('.calendar__datepicker-checkbox__input');H.addEventListener('click',function(){D.ifRangeActive=!D.ifRangeActive,D.ifRangeActive?(a(D),D.calendar.parentNode.querySelector('.calendar__three-days').classList.remove('calendar__three-days_hidden')):(b(D),D.calendar.parentNode.querySelector('.calendar__three-days').classList.add('calendar__three-days_hidden'))}),D.ifRangeActive||(H.checked=!1)}}function o(C){var D=C.el,E=C.calendar,F=D.getBoundingClientRect(),G='\n      top:'+F.height+'px;\n      left: 0px;\n    ';E.setAttribute('style',G)}function p(C,D){C=r(C),this.currentYear=C.getFullYear(),this.currentMonth=C.getMonth(),this.currentMonthName=this.months[C.getMonth()],this.dateSelected=D?void 0:C,D||m(this),f(C,this),D&&(this.input.value='')}function q(){this.setDate(this.startDate,!0)}function r(C){return new Date(C.toDateString())}function s(){var C=this.calendar,D=this.parent,E=this.el;y.forEach(function(F){window.removeEventListener(F,w)}),C.remove(),x=x.filter(function(F){return F!==E})}function t(C){C.calendar.classList.add('calendar__datepicker-hidden'),C.calendar.parentNode.classList.remove('open'),C.onHide&&C.onHide(C);var D=document.querySelector('.navigation');D&&D.classList.remove('navigation_back')}function u(C){C.calendar.classList.remove('calendar__datepicker-hidden'),C.calendar.parentNode.classList.add('open'),o(C),C.onShow&&C.onShow(C);var D=document.querySelector('.navigation');D&&D.classList.add('navigation_back')}function v(){t(this.instance)}function w(C){function D(O){var P=O.calendar,Q=G.classList,R=P.querySelector('.calendar__datepicker-month-year'),S=Q.contains('calendar__datepicker-close');if(Q.contains('calendar__datepicker-num')){var T='SPAN'===G.nodeName?G.parentNode:G,U=['calendar__datepicker-disabled','calendar__datepicker-active','calendar__datepicker-empty'].some(function(V){return T.classList.contains(V)});U||l(T,O)}else Q.contains('calendar__datepicker-arrow')&&n(Q,O)}if(!(this.isMobile&&this.disableMobile)){if(!C.path){for(var J=C.target,K=[];J!==document;)K.push(J),J=J.parentNode;C.path=K}var E=C.type,F=C.path,G=C.target,H=this.calendar,I=this.el,L=H.classList,M=L.contains('calendar__datepicker-hidden'),N=F.includes(H);return'focusin'===E?G===I&&u(this):void(M?G===I&&u(this):'click'===E&&N?D(this):t(this))}}Array.prototype.includes||(Array.prototype.includes=function(C){var D=!1;return this.forEach(function(E){E===C&&(D=!0)}),D});var x=[],y=['click','focusin','keydown','input'],z=['\u041F\u041D','\u0412\u0422','\u0421\u0420','\u0427\u0422','\u041F\u0422','\u0421\u0411','\u0412\u0421'],A=['\u042F\u041D\u0412\u0410\u0420\u042C','\u0424\u0415\u0412\u0420\u0410\u041B\u042C','\u041C\u0410\u0420\u0422','\u0410\u041F\u0420\u0415\u041B\u042C','\u041C\u0410\u0419','\u0418\u042E\u041D\u042C','\u0418\u042E\u041B\u042C','\u0410\u0412\u0413\u0423\u0421\u0422','\u0421\u0415\u041D\u0422\u042F\u0411\u0420\u042C','\u041E\u041A\u0422\u042F\u0411\u0420\u042C','\u041D\u041E\u042F\u0411\u0420\u042C','\u0414\u0415\u041A\u0410\u0411\u0420\u042C'],B=['\u044F\u043D\u0432\u0430\u0440\u044F','\u0444\u0435\u0432\u0440\u0430\u043B\u044F','\u043C\u0430\u0440\u0442\u0430','\u0430\u043F\u0440\u0435\u043B\u044F','\u043C\u0430\u044F','\u0438\u044E\u043D\u044F','\u0438\u044E\u043B\u044F','\u0430\u0432\u0433\u0443\u0441\u0442\u0430','\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F','\u043E\u043A\u0442\u044F\u0431\u0440\u044F','\u043D\u043E\u044F\u0431\u0440\u044F','\u0434\u0435\u043A\u0430\u0431\u0440\u044F'];return function(C,D){if(!C||'object'!==('undefined'==typeof C?'undefined':_typeof(C)))return void console.error('datepicker: el error, el equal '+C+', el is '+('undefined'==typeof C?'undefined':_typeof(C)));D&&(D=d(D||null,C));var E=document.createElement('div'),F=new Date,G=new Date;G.setDate(F.getDate()-1);var H={el:C,input:null,dateSelected:F,ifRange:!!D&&D.ifRange,ifRangeActive:null,minDate:G,calendar:E,currentMonth:F.getMonth(),currentMonthName:A[F.getMonth()],currentYear:F.getFullYear(),setDate:p,reset:q,remove:s,onSelect:D?D.onSelect:void 0,onShow:D?D.onShow:void 0,onHide:D?D.onHide:void 0,onMonthChange:D?D.onMonthChange:void 0,formatter:D?D.formatter:void 0,months:A,days:z,startDay:1,disableMobile:!1,isMobile:'ontouchstart'in window};E.classList.add('calendar__datepicker'),E.classList.add('calendar__datepicker-hidden'),x.push(C),f(F,H),y.forEach(function(K){window.addEventListener(K,w.bind(H))}),C.appendChild(E),E.parentNode.querySelector('.calendar__selected-date').innerHTML=F.getDate()+' '+B[F.getMonth()]+' '+F.getFullYear(),E.parentNode.querySelector('.calendar__three-days').innerHTML='\xB1 3 \u0434\u043D\u044F';var I=H.calendar.querySelector('.calendar__button-submit');if(I.addEventListener('click',v.bind({instance:H})),H.ifRange){var J=E.querySelector('.calendar__datepicker-checkbox__input');J.addEventListener('click',function(){H.ifRangeActive=!H.ifRangeActive,H.ifRangeActive?(a(H),H.calendar.parentNode.querySelector('.calendar__three-days').classList.remove('calendar__three-days_hidden')):(b(H),H.calendar.parentNode.querySelector('.calendar__three-days').classList.add('calendar__three-days_hidden'))}),H.ifRangeActive=J.checked,H.ifRangeActive&&a(H)}else H.calendar.parentNode.removeChild(H.calendar.parentNode.querySelector('.calendar__three-days'));return H.input=E.parentNode.querySelector('.calendar__input'),F&&m(H),H}});