'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};(function(a,b){return'object'===('undefined'==typeof exports?'undefined':_typeof(exports))?module.exports=b():'function'==typeof define&&define.amd?define(function(){return b()}):a.datepicker=b()})(void 0,function(){'use strict';function a(A){if(A.ifRangeActive){b(A);var B=A.calendar.querySelector('.calendar__datepicker-active');if(B){B.classList.add('calendar__datepicker-active-range');for(var C=Array.from(A.calendar.querySelectorAll('.calendar__datepicker-square.calendar__datepicker-num')),D=C.indexOf(B),E=void 0,F=void 0,G=1;3>=G;G++)3===G?(D+G<C.length&&(C[D+G].classList.contains('calendar__datepicker-disabled')||C[D+G].classList.contains('calendar__datepicker-empty')?!F&&(C[D+G-1].classList.remove('calendar__datepicker-num-range'),C[D+G-1].classList.add('calendar__datepicker-num-range-right')):C[D+G].classList.add('calendar__datepicker-num-range-right')),-1<D-G&&(C[D-G].classList.contains('calendar__datepicker-disabled')||C[D-G].classList.contains('calendar__datepicker-empty')?!E&&(C[D-G+1].classList.remove('calendar__datepicker-num-range'),C[D-G+1].classList.add('calendar__datepicker-num-range-left')):C[D-G].classList.add('calendar__datepicker-num-range-left'))):(D+G<C.length&&(C[D+G].classList.contains('calendar__datepicker-disabled')||C[D+G].classList.contains('calendar__datepicker-empty')?!F&&(F=!0,C[D+G-1].classList.remove('calendar__datepicker-num-range'),C[D+G-1].classList.add('calendar__datepicker-num-range-right')):C[D+G].classList.add('calendar__datepicker-num-range')),-1<D-G&&(C[D-G].classList.contains('calendar__datepicker-disabled')||C[D-G].classList.contains('calendar__datepicker-empty')?!E&&(E=!0,C[D-G+1].classList.remove('calendar__datepicker-num-range'),C[D-G+1].classList.add('calendar__datepicker-num-range-left')):C[D-G].classList.add('calendar__datepicker-num-range')))}}}function b(A){var B=A.calendar.querySelector('.calendar__datepicker-active-range');if(B){B.classList.remove('calendar__datepicker-active-range');for(var C=Array.from(A.calendar.querySelectorAll('.calendar__datepicker-square.calendar__datepicker-num')),D=C.indexOf(B),E=0;3>=E;E++)D+E<C.length&&(C[D+E].classList.remove('calendar__datepicker-num-range'),C[D+E].classList.remove('calendar__datepicker-num-range-right')),-1<D-E&&(C[D-E].classList.remove('calendar__datepicker-num-range-left'),C[D-E].classList.remove('calendar__datepicker-num-range'))}}function d(A,B){if(v.includes(B))throw new Error('A datepicker already exists on that element.');var C=A.minDate,D=A.dateSelected,E=A.formatter;return['onSelect','onShow','onHide','onMonthChange'].forEach(function(F){A[F]='function'==typeof A[F]&&A[F]}),A}function f(A,B){var C=h(A,B),D=j(A,B),E='';B.ifRange&&(E=g()),B.calendar.innerHTML=C+D+E}function g(){return'\n\t\t\t<label class="calendar__datepicker-checkbox">\n\t\t\t\t<input type="checkbox" checked class="calendar__datepicker-checkbox__input" id="id-calendar__datepicker-checkbox">\n\t\t\t\t<span class="calendar__datepicker-checkbox__custom"></span>\n\t\t\t\t<span class="calendar__datepicker-checkbox__label">\xB1 3 \u0434\u043D\u044F</span>\n\t\t\t</label>\n    '}function h(A,B){return'\n      <div class="calendar__datepicker-controls">\n        <div class="calendar__datepicker-arrow calendar__datepicker-left"></div>\n        <div class="calendar__datepicker-month-year">\n          <span class="calendar__datepicker-month">'+B.months[A.getMonth()]+'</span>\n          <span class="calendar__datepicker-year">'+A.getFullYear()+'</span>\n        </div>\n        <div class="calendar__datepicker-arrow calendar__datepicker-right"></div>\n      </div>\n    '}function j(A,B){var C=B.minDate,D=B.dateSelected,E=B.currentYear,F=B.currentMonth,G=B.days,H=new Date,I=H.toDateString()===A.toDateString(),J=new Date(new Date(A).setDate(1)),K=J.getDay()-B.startDay,L=0>K?7:0;J.setMonth(J.getMonth()+1),J.setDate(0);var M=J.getDate(),N=[],O=L+7*(0|(K+M)/7);O+=(K+M)%7?7:0,0!==B.startDay&&0==K&&(O+=7);for(var P=1;P<=O;P++){var Q=G[(P-1)%7],R=P-(0<=K?K:7+K),S=new Date(E,F,R),T='<span class="calendar__datepicker-num">'+S.getDate()+'</span>',U=C&&S<C,V=G[6],W=G[0],X=I&&!U&&R===H.getDate(),Y='';Y=U?'calendar__datepicker-disabled':X?'calendar__datepicker-current':'',S.toDateString()===D.toDateString()&&(Y+=' calendar__datepicker-active'),S.getFullYear()<E||S.getFullYear()===E&&S.getMonth()<F?Y+=' prev-month':(S.getFullYear()>E||S.getFullYear()===E&&S.getMonth()>F)&&(Y+=' next-month'),N.push('<div class="calendar__datepicker-square calendar__datepicker-num '+Q+' '+Y+'">'+T+'</div>')}var Z=G.map(function($){return'<div class="calendar__datepicker-square calendar__datepicker-day">'+$+'</div>'}).concat(N);return Z.unshift('<div class="calendar__datepicker-squares">'),Z.push('</div>'),Z.join('')}function k(A,B){var C=B.currentMonth,D=B.currentYear,E=B.calendar,F=B.el,G=B.onSelect,H=E.querySelector('.calendar__datepicker-active'),I=A.textContent,J=new Date(D,C,I);A.classList.contains('prev-month')?J.setMonth(J.getMonth()-1):A.classList.contains('next-month')&&J.setMonth(J.getMonth()+1),B.dateSelected=J,B.calendar.parentNode.querySelector('.calendar__selected-date').innerHTML=I+' '+z[J.getMonth()]+' '+J.getFullYear(),H&&H.classList.remove('calendar__datepicker-active'),A.classList.add('calendar__datepicker-active'),B.ifRange&&B.ifRangeActive&&a(B),l(B),G&&G(B)}function l(A){if(A.formatter)return A.formatter(A.input,A.dateSelected);var B=A.dateSelected.getFullYear(),C=A.dateSelected.getMonth()+1,D=10>C?0:'',E=A.dateSelected.getDate(),F=10>E?0:'';A.input.value=B+'-'+D+C+'-'+F+E}function m(A,B,C){C?B.currentYear=C:(B.currentMonth+=A.contains('calendar__datepicker-right')?1:-1,12===B.currentMonth?(B.currentMonth=0,B.currentYear++):-1===B.currentMonth&&(B.currentMonth=11,B.currentYear--));var D=new Date(B.currentYear,B.currentMonth,1);if(f(D,B),B.currentMonthName=B.months[B.currentMonth],B.onMonthChange&&C&&B.onMonthChange(B),B.ifRange){b(B),a(B);var E=B.calendar.querySelector('.calendar__datepicker-checkbox__input');E.addEventListener('click',function(){B.ifRangeActive=!B.ifRangeActive,B.ifRangeActive?(a(B),B.calendar.parentNode.querySelector('.calendar__three-days').classList.remove('calendar__three-days_hidden')):(b(B),B.calendar.parentNode.querySelector('.calendar__three-days').classList.add('calendar__three-days_hidden'))}),B.ifRangeActive||(E.checked=!1)}}function n(A){var B=A.el,C=A.calendar,D=B.getBoundingClientRect(),E='\n      top:'+D.height+'px;\n      left: 0px;\n    ';C.setAttribute('style',E)}function o(A,B){A=q(A),this.currentYear=A.getFullYear(),this.currentMonth=A.getMonth(),this.currentMonthName=this.months[A.getMonth()],this.dateSelected=B?void 0:A,B||l(this),f(A,this),B&&(this.input.value='')}function p(){this.setDate(this.startDate,!0)}function q(A){return new Date(A.toDateString())}function r(){var A=this.calendar,B=this.parent,C=this.el;w.forEach(function(D){window.removeEventListener(D,u)}),A.remove(),v=v.filter(function(D){return D!==C})}function s(A){A.calendar.classList.add('calendar__datepicker-hidden'),A.calendar.parentNode.classList.remove('open'),A.onHide&&A.onHide(A)}function t(A){A.calendar.classList.remove('calendar__datepicker-hidden'),A.calendar.parentNode.classList.add('open'),n(A),A.onShow&&A.onShow(A)}function u(A){function B(M){var N=M.calendar,O=E.classList,P=N.querySelector('.calendar__datepicker-month-year'),Q=O.contains('calendar__datepicker-close');if(O.contains('calendar__datepicker-num')){var R='SPAN'===E.nodeName?E.parentNode:E,S=['calendar__datepicker-disabled','calendar__datepicker-active','calendar__datepicker-empty'].some(function(T){return R.classList.contains(T)});S||k(R,M)}else O.contains('calendar__datepicker-arrow')&&m(O,M)}if(!(this.isMobile&&this.disableMobile)){if(!A.path){for(var H=A.target,I=[];H!==document;)I.push(H),H=H.parentNode;A.path=I}var C=A.type,D=A.path,E=A.target,F=this.calendar,G=this.el,J=F.classList,K=J.contains('calendar__datepicker-hidden'),L=D.includes(F);return'focusin'===C?E===G&&t(this):void(K?E===G&&t(this):'click'===C&&L?B(this):s(this))}}var v=[],w=['click','focusin','keydown','input'],x=['\u041F\u041D','\u0412\u0422','\u0421\u0420','\u0427\u0422','\u041F\u0422','\u0421\u0411','\u0412\u0421'],y=['\u042F\u041D\u0412\u0410\u0420\u042C','\u0424\u0415\u0412\u0420\u0410\u041B\u042C','\u041C\u0410\u0420\u0422','\u0410\u041F\u0420\u0415\u041B\u042C','\u041C\u0410\u0419','\u0418\u042E\u041D\u042C','\u0418\u042E\u041B\u042C','\u0410\u0412\u0413\u0423\u0421\u0422','\u0421\u0415\u041D\u0422\u042F\u0411\u0420\u042C','\u041E\u041A\u0422\u042F\u0411\u0420\u042C','\u041D\u041E\u042F\u0411\u0420\u042C','\u0414\u0415\u041A\u0410\u0411\u0420\u042C'],z=['\u044F\u043D\u0432\u0430\u0440\u044F','\u0444\u0435\u0432\u0440\u0430\u043B\u044F','\u043C\u0430\u0440\u0442\u0430','\u0430\u043F\u0440\u0435\u043B\u044F','\u043C\u0430\u044F','\u0438\u044E\u043D\u044F','\u0438\u044E\u043B\u044F','\u0430\u0432\u0433\u0443\u0441\u0442\u0430','\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F','\u043E\u043A\u0442\u044F\u0431\u0440\u044F','\u043D\u043E\u044F\u0431\u0440\u044F','\u0434\u0435\u043A\u0430\u0431\u0440\u044F'];return function(A,B){if(!A||'object'!==('undefined'==typeof A?'undefined':_typeof(A)))return void console.error('datepicker: el error, el equal '+A+', el is '+('undefined'==typeof A?'undefined':_typeof(A)));B&&(B=d(B||null,A));var C=document.createElement('div'),D=new Date,E=new Date;E.setDate(D.getDate()-1);var F={el:A,input:null,dateSelected:D,ifRange:!!B&&B.ifRange,ifRangeActive:null,minDate:E,calendar:C,currentMonth:D.getMonth(),currentMonthName:y[D.getMonth()],currentYear:D.getFullYear(),setDate:o,reset:p,remove:r,onSelect:B?B.onSelect:void 0,onShow:B?B.onShow:void 0,onHide:B?B.onHide:void 0,onMonthChange:B?B.onMonthChange:void 0,formatter:B?B.formatter:void 0,months:y,days:x,startDay:1,disableMobile:!1,isMobile:'ontouchstart'in window};if(C.classList.add('calendar__datepicker'),C.classList.add('calendar__datepicker-hidden'),v.push(A),f(D,F),w.forEach(function(H){window.addEventListener(H,u.bind(F))}),A.appendChild(C),C.parentNode.querySelector('.calendar__selected-date').innerHTML=D.getDate()+' '+z[D.getMonth()]+' '+D.getFullYear(),C.parentNode.querySelector('.calendar__three-days').innerHTML='\xB1 3 \u0434\u043D\u044F',F.ifRange){var G=C.querySelector('.calendar__datepicker-checkbox__input');G.addEventListener('click',function(){F.ifRangeActive=!F.ifRangeActive,F.ifRangeActive?(a(F),F.calendar.parentNode.querySelector('.calendar__three-days').classList.remove('calendar__three-days_hidden')):(b(F),F.calendar.parentNode.querySelector('.calendar__three-days').classList.add('calendar__three-days_hidden'))}),F.ifRangeActive=G.checked,F.ifRangeActive&&a(F)}else F.calendar.parentNode.removeChild(F.calendar.parentNode.querySelector('.calendar__three-days'));return F.input=C.parentNode.querySelector('.calendar__input'),D&&l(F),F}});